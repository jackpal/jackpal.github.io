<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="GrammerJack"/><link rel="canonical" href="https://jackpal.github.io/posts/2008/01/Darwin_Ports_issue_with__patch_"/><meta name="twitter:url" content="https://jackpal.github.io/posts/2008/01/Darwin_Ports_issue_with__patch_"/><meta name="og:url" content="https://jackpal.github.io/posts/2008/01/Darwin_Ports_issue_with__patch_"/><title>Darwin Ports issue with "patch" | GrammerJack</title><meta name="twitter:title" content="Darwin Ports issue with "patch" | GrammerJack"/><meta name="og:title" content="Darwin Ports issue with "patch" | GrammerJack"/><meta name="description" content="Jack Palevich's Essays"/><meta name="twitter:description" content="Jack Palevich's Essays"/><meta name="og:description" content="Jack Palevich's Essays"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to GrammerJack"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">GrammerJack</a><nav><ul><li><a href="/about">About</a></li><li><a class="selected" href="/posts">My posts</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Darwin Ports issue with "patch"</h1><p>Ever since I've upgraded to Apple Macintosh OS X 10.5 Leopard, I've run into problems using the Darwinports "port" command to install new software.</p><p>The problem is that for some reason the version of GNU "patch" that I have installed in /usr/bin/patch is version 2.5.8, and it doesn't operate the way that Darwin ports expects. A typical error message is:</p><pre><code><div class="highlight"><span></span><span class="o">---&gt;</span> <span class="n">Applying</span> <span class="n">patches</span> <span class="n">to</span> <span class="n">erlang</span>
<span class="n">Error</span><span class="p">:</span> <span class="n">Target</span> <span class="n">org</span><span class="p">.</span><span class="n">macports</span><span class="p">.</span><span class="n">patch</span> <span class="n">returned</span><span class="p">:</span> <span class="n">shell</span> <span class="n">command</span> <span class="s">&quot; cd &quot;</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="kd">var</span><span class="o">/</span><span class="n">macports</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">_opt_local_var_macports_sources_rsync</span><span class="p">.</span><span class="n">macports</span><span class="p">.</span><span class="n">org_release_ports_lang_erlang</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">erlang</span><span class="o">-</span><span class="n">R12B</span><span class="o">-</span><span class="mi">0</span><span class="s">&quot; &amp;&amp; patch -p0 &lt; &#39;/opt/local/var/macports/sources/rsync.macports.org/release/ports/lang/erlang/files/patch-toolbar.erl&#39;&quot;</span> <span class="n">returned</span> <span class="n">error</span> <span class="mi">2</span>
<span class="n">Command</span> <span class="n">output</span><span class="p">:</span> <span class="n">Get</span> <span class="n">file</span> <span class="n">lib</span><span class="o">/</span><span class="n">toolbar</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">toolbar</span><span class="p">.</span><span class="n">erl</span> <span class="n">from</span> <span class="n">Perforce</span> <span class="n">with</span> <span class="n">lock</span><span class="p">?</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="n">Perforce</span> <span class="n">client</span> <span class="n">error</span><span class="p">:</span>
<span class="n">Connect</span> <span class="n">to</span> <span class="n">server</span> <span class="n">failed</span><span class="p">;</span> <span class="n">check</span> <span class="err">$</span><span class="n">P4PORT</span><span class="p">.</span>
<span class="n">TCP</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">perforce</span> <span class="n">failed</span><span class="p">.</span>
<span class="n">perforce</span><span class="p">:</span> <span class="n">host</span> <span class="n">unknown</span><span class="p">.</span>
<span class="n">patch</span><span class="p">:</span> <span class="o">****</span> <span class="n">Can</span><span class="err">&#39;</span><span class="n">t</span> <span class="kr">get</span> <span class="n">file</span> <span class="n">lib</span><span class="o">/</span><span class="n">toolbar</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">toolbar</span><span class="p">.</span><span class="n">erl</span> <span class="n">from</span> <span class="n">Perforce</span>

<span class="n">Error</span><span class="p">:</span> <span class="n">Status</span> <span class="mi">1</span> <span class="n">encountered</span> <span class="n">during</span> <span class="n">processing</span><span class="p">.</span>
</div></code></pre><p>The work-around is to define the environment variable POSIXLY_CORRECT=1 , as in:</p><pre><code><div class="highlight"><span></span><span class="n">POSIXLY_CORRECT</span><span class="p">=</span><span class="mi">1</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">erlang</span>
</div></code></pre><p>Now, I've done some web searching, and I haven't seen anyone else complaining about this problem, so perhaps there's something odd about my setup.</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/mac">Mac</a></li><li><a href="/tags/darwin-ports">Darwin Ports</a></li><li><a href="/tags/bug">bug</a></li></ul></article></div><footer><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>